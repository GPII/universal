{
    "type": "gpii.preferencesServer.config.production",
    "options": {
        "gradeNames": "fluid.component",
        "distributeOptions": {
            "rawPreferencesDataSource.productionDataSource": {
                "record": {
                    "type": "kettle.dataSource.URL",
                    "options": {
                        "gradeNames": "kettle.dataSource.CouchDB",
                        "url": "http://localhost:5984/preferences/%userToken"
                    }
                },
                "target": "{that preferencesServer rawPreferencesDataSource}"
            },
            "rawPreferencesDataSource.productionEnvUrl": {
                "record": {
                    "type": "kettle.dataSource.URL",
                    "options": {
                        "gradeNames": "kettle.dataSource.CouchDB",
                        "url": "@expand:kettle.resolvers.env(GPII_PREFERENCES_DATASOURCE_URL)"
                    }
                },
                "target": "{that preferencesServer rawPreferencesDataSource}",
                "priority": "after:rawPreferencesDataSource.productionDataSource"
            },
            "logging": {
                 "record": true,
                 "target": "{that kettle.server}.options.logging"
            },
            "distributePort.productionPort": {
                "record": 8081,
                "target": "{that kettle.server}.options.port"
            },
            "distributePort.productionEnvPort": {
                "record": "@expand:kettle.resolvers.env(GPII_PREFERENCES_LISTEN_PORT)",
                "target": "{that kettle.server}.options.port",
                "priority": "after:distributePort.productionPort"
            }
        }
    },
    "mergeConfigs": "./gpii.preferencesServer.config.base.json"
}
