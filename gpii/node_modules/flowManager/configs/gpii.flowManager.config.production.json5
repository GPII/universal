/**
 * Running the flowmanager in production mode
 *
 * **WARNING: This config this is untrusted and most likely broken**
 */
{
    "type": "gpii.flowManager.config.production",
    "options": {
        "gradeNames": ["fluid.component"],
        "distributeOptions": {
            "preferencesDataSource.productionDataSource": {
                "record": {
                    "type": "kettle.dataSource.URL",
                    "options": {
                        "url": "https://preferences.gpii.net/preferences/%gpiiKey?merge=%merge"
                    }
                },
                "target": "{that flowManager preferencesDataSource}"
            },
            "preferencesDataSource.productionEnvUrl": {
                "record": "@expand:kettle.resolvers.env(FLOWMANAGER_TO_PREFERENCESSERVER_URL)",
                "target": "{that flowManager preferencesDataSource}.options.url",
                "priority": "after:preferencesDataSource.productionDataSource"
            },
            "distributePort.productionPort": {
                "record": 8081,
                "target": "{that kettle.server}.options.port"
            },
            "distributePort.productionEnvPort": {
                "record": "@expand:kettle.resolvers.env(FLOWMANAGER_LISTEN_PORT)",
                "target": "{that kettle.server}.options.port",
                "priority": "after:distributePort.productionPort"
            }
        }
    },
    "mergeConfigs": [
        "./gpii.flowManager.config.local.base.json5"
    ]
}
