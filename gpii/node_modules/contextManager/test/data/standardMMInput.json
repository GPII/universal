{
    "preferences": {
        "contexts": {
            "gpii-default": {
                "name": "Default preferences",
                "preferences": {
                    "http://registry.gpii.net/common/fontSize": 15,
                    "http://registry.gpii.net/common/speechRate": 15
                }
            },
            "nighttime-at-home": {
                "name": "Nighttime at home",
                "preferences": {
                    "http://registry.gpii.net/common/fontSize": 18
                },
                "metadata": [
                   {
                        "type": "required",
                        "scope": ["http://registry.gpii.net/common/fontSize"],
                        "value": 100
                    }
                ],
                "conditions": [
                    {
                        "type": "http://registry.gpii.net/conditions/inRange",
                        "max": 1800,
                        "min": 600,
                        "inputPath": "http://registry\\.gpii\\.net/environment/illuminance"
                    }
                ]
            }
        }
    },
    "userToken": "my_prefs",
    "deviceContext": {
        "OS": {
            "id": "win32",
            "version": "6.1.7601"
        },
        "solutions": [
            {
                "id": "com.microsoft.windows.onscreenKeyboard"
            }, {
                "id": "com.microsoft.windows.mouseTrailing"
            }, {
                "id": "org.nvda-project"
            }, {
                "id": "com.freedomScientific.jaws"
            }
        ]
    },
    "environmentReporter": {
        "http://registry.gpii.net/terms/environment/brightness": 60,
        "http://registry.gpii.net/terms/environment/sound": -6,
        "http://registry.gpii.net/terms/environment/timeOfDay": "18:29:00",
        "http://registry.gpii.net/terms/environment/location": {
            "lat": "43.999N",
            "long": "74.382W"
        }
    },
    "solutionsRegistryEntries": {
        "com.freedomscientific.jaws": {
            "name": "JAWS",
            "contexts": {
                "OS": [
                    {
                        "id": "win32"
                    }
                ]
            },
            "settingsHandlers": {
                "configuration1": {
                    "type": "gpii.settingsHandlers.INISettingsHandler",
                    "options": {
                        "filename": "${{environment}.APPDATA}\\Freedom Scientific\\JAWS\\17.0\\Settings\\enu\\DEFAULT.JCF"
                    },
                    "supportedSettings": {},
                    "capabilities": [
                        "http://registry\\.gpii\\.net/common/screenReaderTTSEnabled"
                    ],
                    "capabilitiesTransformations": {},
                    "inverseCapabilitiesTransformations": {}
                },
                "configuration2": {
                    "type": "gpii.settingsHandlers.INISettingsHandler",
                    "options": {
                        "filename": "${{environment}.APPDATA}\\Freedom Scientific\\JAWS\\17.0\\Settings\\VoiceProfiles\\GPII.VPF"
                    },
                    "supportedSettings": {
                        "Options.PrimarySynthesizer": {},
                        "ENU-Global.Rate": {},
                        "ENU-JAWSCursor.Rate": {},
                        "ENU-Keyboard.Rate": {},
                        "ENU-MenuAndDialog.Rate": {},
                        "ENU-Message.Rate": {},
                        "ENU-PCCursor.Rate": {}
                    },
                    "capabilities": [],
                    "capabilitiesTransformations": {
                        "ENU-Global\\.Rate": "http://registry\\.gpii\\.net/common/speechRate",
                        "ENU-JAWSCursor\\.Rate": "http://registry\\.gpii\\.net/common/speechRate",
                        "ENU-Keyboard\\.Rate": "http://registry\\.gpii\\.net/common/speechRate",
                        "ENU-MenuAndDialog\\.Rate": "http://registry\\.gpii\\.net/common/speechRate",
                        "ENU-Message\\.Rate": "http://registry\\.gpii\\.net/common/speechRate",
                        "ENU-PCCursor\\.Rate": "http://registry\\.gpii\\.net/common/speechRate"
                    },
                    "inverseCapabilitiesTransformations": {}
                }
            },
            "configure": [
                "settings.configuration1",
                "settings.configuration2"
            ],
            "restore": [
                "settings.configuration1",
                "settings.configuration2"
            ],
            "start": [
                {
                    "type": "gpii.launch.exec",
                    "command": "\"${{registry}.HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\App Paths\\JAWS17.exe\\}\""
                }
            ],
            "stop": [
                {
                    "type": "gpii.windows.closeProcessByName",
                    "filename": "jfw.exe"
                }
            ],
            "isInstalled": [
                {
                    "type": "gpii.deviceReporter.registryKeyExists",
                    "hKey": "HKEY_LOCAL_MACHINE",
                    "path": "Software\\Microsoft\\Windows\\CurrentVersion\\App Paths\\JAWS17.exe",
                    "subPath": "",
                    "dataType": "REG_SZ"
                }
            ]
        },

        "org.nvda-project": {
            "name": "NVDA Screen Reader",
            "contexts": {
                "OS": [
                    {
                        "id": "win32",
                        "version": ">=5.0"
                    }
                ]
            },
            "settingsHandlers": {
                "configs": {
                    "type": "gpii.settingsHandlers.INISettingsHandler",
                    "options": {
                        "filename": "${{environment}.APPDATA}\\nvda\\nvda.ini",
                        "allowNumberSignComments": true,
                        "allowSubSections": true
                    },
                    "capabilities": [],
                    "capabilitiesTransformations": {
                        "speech\\.espeak\\.rate": {
                            "transform": {
                                "type": "fluid.transforms.round",
                                "input": {
                                    "transform": {
                                        "type": "fluid.transforms.binaryOp",
                                        "right": 3.10,
                                        "operator": "/",
                                        "left": {
                                            "transform": {
                                                "type": "fluid.transforms.binaryOp",
                                                "right": 80,
                                                "operator": "-",
                                                "left": {
                                                    "transform": {
                                                        "type": "fluid.transforms.condition",
                                                        "truePath": "http://registry\\.gpii\\.net/common/speechRate",
                                                        "false": {
                                                            "transform": {
                                                                "type": "fluid.transforms.binaryOp",
                                                                "leftPath": "http://registry\\.gpii\\.net/common/speechRate",
                                                                "operator": "/",
                                                                "right": 3
                                                            }
                                                        },
                                                        "condition": {
                                                            "transform": {
                                                                "type": "fluid.transforms.binaryOp",
                                                                "leftPath": "http://registry\\.gpii\\.net/common/speechRate",
                                                                "operator": "<=",
                                                                "right": 390
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "speech\\.espeak\\.rateBoost": {
                            "transform": {
                                "type": "fluid.transforms.binaryOp",
                                "leftPath": "http://registry\\.gpii\\.net/common/speechRate",
                                "operator": ">",
                                "right": 390
                            }
                        }
                    },
                    "inverseCapabilitiesTransformations": {}
                }
            },
            "configure": [
                "settings.configs"
            ],
            "restore": [
                "settings.configs"
            ],
            "start": [
                {
                    "type": "gpii.launch.exec",
                    "command": "\"${{registry}.HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\App Paths\\nvda.exe\\}\""
                }
            ],
            "stop": [
                {
                    "type": "gpii.windows.closeProcessByName",
                    "filename": "nvda_service.exe"
                },{
                    "type": "gpii.windows.closeProcessByName",
                    "filename": "nvda.exe"
                }
            ],
            "isInstalled": [
                {
                    "type": "gpii.deviceReporter.registryKeyExists",
                    "hKey": "HKEY_LOCAL_MACHINE",
                    "path": "Software\\Microsoft\\Windows\\CurrentVersion\\App Paths\\nvda.exe",
                    "subPath": "",
                    "dataType": "REG_SZ"
                }
            ]
        },
        "com.microsoft.windows.mouseTrailing": {
            "name": "Windows Mouse Trailing",
            "contexts": {
                "OS": [
                    {
                        "id": "win32",
                        "version": ">=5.0"
                    }
                ]
            },
            "settingsHandlers": {
                "configure": {
                    "type": "gpii.windows.spiSettingsHandler",
                    "options": {
                        "getAction": "SPI_GETMOUSETRAILS",
                        "setAction": "SPI_SETMOUSETRAILS",
                        "uiParam": 0,
                        "pvParam": {
                            "type": "UINT"
                        },
                        "verifySettings": true
                    },
                    "capabilities": [
                        "http://registry\\.gpii\\.net/common/mouseTrailing"
                    ],
                    "capabilitiesTransformations": {
                        "MouseTrails": {
                            "transform": {
                                "type": "fluid.transforms.value",
                                "inputPath": "http://registry\\.gpii\\.net/common/mouseTrailing",
                                "outputPath": "value"
                            },
                            "path": {
                                "transform": {
                                    "type": "fluid.transforms.literalValue",
                                    "input": {
                                        "get": "pvParam",
                                        "set": "uiParam"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "configure": [
                "settings.configure"
            ],
            "restore": [
                "settings.configure"
            ],
            "isInstalled": [
                {
                    "type": "gpii.deviceReporter.alwaysInstalled"
                }
            ]
        }
    },
    "activeContexts": [
        "gpii-default",
        "nighttime-at-home"
    ]
}