{
  "name": "Windows Built-in Screen Magnifier",
  "parents": ["gpii.solutionsRegistry.solution", "gpii.solutionsRegistry.context.windows"],
  "capabilities": [
    "http://registry\\.gpii\\.net/common/magnification/enabled"
  ],
  "update": [
    "settings.configure",
    "settings.configureSystemSettings"
  ],
  "configure": [
    "settings.configure",
    "settings.configureSystemSettings"
  ],
  "restore": [
    "settings.configure",
    "settings.configureSystemSettings"
  ],
  "launchHandlers": {
    "launcher": {
      "type": "gpii.windows.enableRegisteredAT",
      "options": {
        "registryName": "magnifierpane",
        "getState": [
          {
            "type": "gpii.processReporter.find",
            "command": "Magnify.exe"
          }
        ]
      }
    }
  },
  "isInstalled": [
    {
      "type": "gpii.deviceReporter.alwaysInstalled"
    }
  ],
  "settingsHandlers": {
    "configure": {
      "liveness": "liveRestart",
      "capabilitiesTransformations": {
        "Invert": {
          "transform": {
            "type": "gpii.transformer.booleanToNumber",
            "inputPath": "http://registry\\.gpii\\.net/common/invertColours"
          }
        },
        "Magnification": {
          "transform": {
            "type": "fluid.transforms.round",
            "input": {
              "transform": {
                "type": "fluid.transforms.linearScale",
                "inputPath": "http://registry\\.gpii\\.net/common/magnification",
                "factor": 100
              }
            }
          }
        },
        "transform": [
          {
            "type": "fluid.transforms.arrayToSetMembership",
            "inputPath": "http://registry\\.gpii\\.net/common/tracking",
            "outputPath": "",
            "presentValue": 1,
            "missingValue": 0,
            "options": {
              "focus": "FollowFocus",
              "caret": "FollowCaret",
              "mouse": "FollowMouse"
            }
          }
        ],
        "MagnificationMode": {
          "transform": {
            "type": "fluid.transforms.valueMapper",
            "defaultInputPath": "http://registry\\.gpii\\.net/common/magnifierPosition",
            "match": {
              "FullScreen": 2,
              "Lens": 3,
              "LeftHalf": 1,
              "RightHalf": 1,
              "TopHalf": 1,
              "BottomHalf": 1,
              "Custom": 2
            }
          }
        }
      },
      "inverseCapabilitiesTransformations": {
        "http://registry\\.gpii\\.net/common/invertColours": "Invert",
        "transform": [
          {
            "type": "fluid.transforms.linearScale",
            "inputPath": "Magnification",
            "outputPath": "http://registry\\.gpii\\.net/common/magnification",
            "factor": 0.01
          },
          {
            "type": "fluid.transforms.setMembershipToArray",
            "inputPath": "",
            "outputPath": "http://registry\\.gpii\\.net/common/tracking",
            "presentValue": 1,
            "missingValue": 0,
            "options": {
              "FollowFocus": "focus",
              "FollowMouse": "mouse",
              "FollowCaret": "caret"
            }
          },
          {
            "type": "fluid.transforms.valueMapper",
            "defaultInputPath": "MagnificationMode",
            "defaultOutputPath": "http://registry\\.gpii\\.net/common/magnifierPosition",
            "match": {
              "1": "TopHalf",
              "2": "FullScreen",
              "3": "Lens"
            }
          }
        ]
      },
      "settingsHandlerOptions": {
        "hKey": "HKEY_CURRENT_USER",
        "path": "Software\\Microsoft\\ScreenMagnifier",
        "dataTypes": {
          "Magnification": "REG_DWORD",
          "Invert": "REG_DWORD",
          "FollowFocus": "REG_DWORD",
          "FollowCaret": "REG_DWORD",
          "FollowMouse": "REG_DWORD",
          "FollowNarrator": "REG_DWORD",
          "MagnificationMode": "REG_DWORD",
          "FadeToMagIcon": "REG_DWORD",
          "ZoomIncrement": "REG_DWORD",
          "UseBitmapSmoothing": "REG_DWORD",
          "LensHeight": "REG_DWORD",
          "LensWidth": "REG_DWORD"
        }
      },
      "settingsHandlerNamespace": "gpii.windows.registrySettingsHandler",
      "supportedSettings": {
        "Invert": {
          "schema": {
            "title": "Invert Colours",
            "description": "Enable colour inversion for Magnifier",
            "enum": [
              0,
              1
            ],
            "enumLabels": [
              "Off",
              "On"
            ]
          }
        },
        "Magnification": {
          "schema": {
            "title": "Magnification",
            "description": "Set up magnification level",
            "type": "number",
            "default": 200,
            "minimum": 100,
            "maximum": 1600
          }
        },
        "FollowFocus": {
          "schema": {
            "title": "Magnifier follows focus",
            "description": "Magnifier follows the keyboard focus",
            "enum": [
              0,
              1
            ],
            "enumLabels": [
              "Off",
              "On"
            ]
          }
        },
        "FollowCaret": {
          "schema": {
            "title": "Magnifier follows caret",
            "description": "Magnifier follows the text insertion point",
            "enum": [
              0,
              1
            ],
            "enumLabels": [
              "Off",
              "On"
            ]
          }
        },
        "FollowMouse": {
          "schema": {
            "title": "Magnifier follows mouse",
            "description": "Magnifier follows the mouse pointer",
            "enum": [
              0,
              1
            ],
            "enumLabels": [
              "Off",
              "On"
            ]
          }
        },
        "FollowNarrator": {
          "schema": {
            "title": "Magnifier follows Narrator",
            "description": "Magnifier follows the Narrator cursor",
            "enum": [
              0,
              1
            ],
            "enumLabels": [
              "Off",
              "On"
            ]
          }
        },
        "MagnificationMode": {
          "schema": {
            "title": "Magnifier position",
            "description": "Position of the magnified area",
            "default": 2,
            "enum": [
              1,
              2,
              3
            ],
            "enumLabels": [
              "Docked",
              "FullScreen",
              "Lens"
            ]
          }
        },
        "FadeToMagIcon": {
          "schema": {
            "title": "Collapse into magnifiying glass",
            "description": "Collapse Magnifier window into a floating transparent magnifying glass.",
            "enum": [
              0,
              1
            ],
            "enumLabels": [
              "Off",
              "On"
            ]
          }
        },
        "ZoomIncrement": {
          "schema": {
            "title": "Zoom Increment",
            "description": "Change zoom increments.",
            "type": "number",
            "default": 100,
            "enum": [
              25,
              50,
              100,
              150,
              200,
              400
            ],
            "enumLabels": [
              "25%",
              "50%",
              "100% (default)",
              "150%",
              "200%",
              "400%"
            ]
          }
        },
        "UseBitmapSmoothing": {
          "schema": {
            "title": "Smooth edges of images and text",
            "description": "Enables/Disables smoothing for edges",
            "enum": [
              0,
              1
            ],
            "enumLabels": [
              "Off",
              "On"
            ]
          }
        },
        "LensHeight": {
          "schema": {
            "title": "Lens Height",
            "description": "Modifies the height of the magnifier lens.",
            "type": "integer",
            "minimum": 10,
            "maximum": 100,
            "default": 30
          }
        },
        "LensWidth": {
          "schema": {
            "title": "Lens Width",
            "description": "Modifies the width of the magnifier lens.",
            "type": "integer",
            "minimum": 10,
            "maximum": 100,
            "default": 30
          }
        }
      }
    },
    "configureSystemSettings": {
      "liveness": "live",
      "capabilitiesTransformations": {
        "SystemSettings_Accessibility_Magnifier_IsAutoStartEnabled": {
          "value": "http://registry\\.gpii\\.net/applications/com\\.microsoft\\.windows\\.magnifier.EnableAutoStart"
        },
        "SystemSettings_Accessibility_Magnifier_IsAutoStartOnLogonDesktopEnabled": {
          "value": "http://registry\\.gpii\\.net/applications/com\\.microsoft\\.windows\\.magnifier.EnableSystemAutoStart"
        }
      },
      "inverseCapabilitiesTransformations": {
        "http://registry\\.gpii\\.net/applications/com\\.microsoft\\.windows\\.magnifier.EnableAutoStart": "SystemSettings_Accessibility_Magnifier_IsAutoStartEnabled.value",
        "http://registry\\.gpii\\.net/applications/com\\.microsoft\\.windows\\.magnifier.EnableSystemAutoStart": "SystemSettings_Accessibility_Magnifier_IsAutoStartOnLogonDesktopEnabled.value"
      },
      "settingsHandlerOptions": {
        "Async": true,
        "CheckResult": true
      },
      "settingsHandlerNamespace": "gpii.windows.systemSettingsHandler",
      "supportedSettings": {
        "SystemSettings_Accessibility_Magnifier_IsAutoStartEnabled": {
          "schema": {
            "title": "Auto Start Magnifier",
            "description": "Start Magnifier after sign-in.",
            "type": "object",
            "properties": {
              "value": {
                "type": "boolean",
                "default": false
              }
            }
          }
        },
        "SystemSettings_Accessibility_Magnifier_IsAutoStartOnLogonDesktopEnabled": {
          "schema": {
            "title": "Auto Start Magnifier for everyone",
            "description": "Start Magnifier before sign-in.",
            "type": "object",
            "properties": {
              "value": {
                "type": "boolean",
                "default": false
              }
            }
          }
        }
      }
    }
  }
}
