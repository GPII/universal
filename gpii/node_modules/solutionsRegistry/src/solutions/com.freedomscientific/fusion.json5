// Fusion is a reskinned mode for ZoomText, which is why it looks for / stops Zt.exe instead of its own process.
{
  "name": "Fusion",
  "key": "com.freedomscientific.fusion",
  "parents": ["gpii.solutionsRegistry.solution", "gpii.solutionsRegistry.context.windows"],
  "capabilities": [
    "http://registry\\.gpii\\.net/common/magnification/enabled"
  ],
  "launchHandlers": {
    "launcher": {
      "type": "gpii.launchHandlers.flexibleHandler",
      "options": {
        "verifySettings": true,
        "retryOptions": {
          "rewriteEvery": 0,
          "numRetries": 20
        },
        "getState": [
          {
            "type": "gpii.processReporter.find",
            "command": "Zt.exe"
          }
        ],
        // TODO: Confirm that we can use this binary as the launcher rather than:
        // C:\Program Files\Freedom Scientific\ZoomText\2020\Zt.exe
        "setTrue": [
          {
            "type": "gpii.launch.exec",
            "command": "\"${{registry}.HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\App Paths\\Fusion2020.exe\\}\""
          }
        ],
        "setFalse": [
          {
            "type": "gpii.windows.closeProcessByName",
            "filename": "Zt.exe"
          }
        ]
      }
    }
  },
  "isInstalled": [
    {
      "type": "gpii.deviceReporter.registryKeyExists",
      "hKey": "HKEY_LOCAL_MACHINE",
      "path": "Software\\Microsoft\\Windows\\CurrentVersion\\App Paths\\Fusion2020.exe",
      "subPath": "",
      "dataType": "REG_SZ"
    }
  ],
  // This solution has no settings of its own, but is rather a front-end to control JAWS and ZoomText.
  "settingsHandlers": {
  }
}
