"use strict";
var fluid = require("infusion");

require("./contexts");
require("./rehydrator");
require("./setting");
require("./settingsHandlerHolder");
require("./solution");
require("./solutionsHolder");

fluid.defaults("gpii.solutionsRegistry.live", {
    gradeNames: ["gpii.solutionsRegistry.rehydrator"],
    events: {
        createRegistry: null,
        registryCreated: null
    },
    dynamicComponents: {
        registry: {
            createOnEvent: "createRegistry",
            type: "gpii.solutionsRegistry.solutionsHolder",
            options: {
                solutions: "{arguments}.0",
                listeners: {
                    "onCreate.notifyParent": {
                        func: "{gpii.solutionsRegistry.live}.events.registryCreated.fire"
                    }
                }
            }
        }
    },
    listeners: {
        "scanRegistry.createRegistry": {
            priority: "last",
            func: "{that}.events.createRegistry.fire"
        }
    }
});
