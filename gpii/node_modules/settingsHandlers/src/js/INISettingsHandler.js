/*!
  GPII INI Settings Handler

  Copyright 2012 Raising the Floor - International

  Licensed under the New BSD license. You may not use this file except in
  compliance with this License.

  You may obtain a copy of the License at
  https://github.com/gpii/universal/LICENSE.txt
*/

(function () {

    "use strict";

    var fluid = require("infusion"),
        gpii = fluid.registerNamespace("gpii"),
        iniparser = require("ini");
    
    require("./settingsHandlerUtilities.js");
        
    fluid.registerNamespace("gpii.settingsHandlers.INISettingsHandler.parser");
    
    gpii.settingsHandlers.INISettingsHandler.parser.parse = function (content, options) {
        var parsed = iniparser.parse(content, options);
        return gpii.settingsHandlers.numberify(parsed);
    };

    gpii.settingsHandlers.INISettingsHandler.parser.stringify = function (content, options) {
        return iniparser.stringify(content, null, options);
    };

    /* PUBLIC API FUNCTIONS */
    gpii.settingsHandlers.INISettingsHandler.get =
        gpii.settingsHandlers.makeFileGet(gpii.settingsHandlers.INISettingsHandler.parser);
    gpii.settingsHandlers.INISettingsHandler.set =
        gpii.settingsHandlers.makeFileSet(gpii.settingsHandlers.INISettingsHandler.parser);
}());
