/**
 GPII Raw Preferences Server Utilities.

 Copyright 2014 OCAD University

 Licensed under the New BSD license. You may not use this file except in
 compliance with this License.

 You may obtain a copy of the License at
 https://github.com/gpii/universal/LICENSE.txt
*/

(function () {

    "use strict";

    var fluid = require("infusion"),
        gpii = fluid.registerNamespace("gpii");

    gpii.rawPreferencesServer.handlePreferences = function (requestProxy, userToken, preferences) {
        var data = {
            userToken: userToken,
            preferences: preferences
        }, event = "onSuccess";
        if (preferences && preferences.isError) { // preferences are NOT expected on PUT/POST
            data = preferences;
            event = "onError";
        }
        requestProxy.events[event].fire(data);
    };

})();
