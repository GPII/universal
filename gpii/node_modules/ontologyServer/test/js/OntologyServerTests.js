/*!
GPII Canopy Ontology Server Tests

Copyright 2012 OCAD University

Licensed under the New BSD license. You may not use this file except in
compliance with this License.

You may obtain a copy of the License at
https://github.com/gpii/universal/LICENSE.txt
*/

// Declare dependencies
/*global require, fluid, jqUnit, gpii, start*/

(function () {
    "use strict";

    var fluid = require("infusion");
    var gpii = fluid.registerNamespace("gpii");

    fluid.registerNamespace("gpii.tests.ontologyServer");

    var preferences = {
        flat: {
            "http://gpii.org/ontology/A4A-2.0/display/screenEnhancement/magnification": 2.0,
            "http://gpii.org/ontology/A4A-2.0/display/screenEnhancement/tracking": "mouse",
            "http://gpii.org/ontology/A4A-2.0/display/screenEnhancement/invertImages": true
        },
        nested: {
            "display": {
                "screenEnhancement": {
                    "magnification": 2.0,
                    "tracking": "mouse",
                    "invertImages": true
                }
            }
        }
    };

    gpii.tests.ontologyServer.runTests = function () {
        var testCase = jqUnit.TestCase("Utilities");
        
        testCase.test("ontologyServer.getOntologyName", function () {
            var expected = {
                flat: "A4A-2.0",
                nested: "default"
            };
            fluid.each(preferences, function (prefSet, type) {
                var actualName = ontologyServer.getOntologyName(prefSet);
                jqUnit.assertEquals("Ontology name is inferred correctly",
                    expected[type], actualName);
            });
        });
    };

}());