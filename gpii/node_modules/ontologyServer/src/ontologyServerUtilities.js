/*!
GPII Ontology Server Utilities

Copyright 2012 OCAD University

Licensed under the New BSD license. You may not use this file except in
compliance with this License.

You may obtain a copy of the License at
https://github.com/gpii/universal/LICENSE.txt
*/

var fluid = require("infusion");
    
var ontologyServer = fluid.registerNamespace("gpii.ontologyServer");

ontologyServer.getOntologyName = function (preferences) {
    return fluid.find(preferences, function (preference, key) {
        var ontologyPrefix = "//gpii.org/ontology/",
            index = key.indexOf(ontologyPrefix);
        if (index < 0) {
            return "default";
        }
        index += ontologyPrefix.length;
        var segs = key.substr(index).split("/");
        return segs[0];
    });
};